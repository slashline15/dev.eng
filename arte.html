<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex">
  <title>Arte Secreta</title>
  <style>
    /* Configuração de tema: altere as variáveis abaixo */
    :root {
      --bg-color: #0a0a0a;
      --text-color: #ff6600d8;
      --moz-text-decoration-color: #ff6600d8;
      --accent-color: #1e90ff;
      --text-font: 'Courier New', monospace;
      --link-color: rgba(255, 187, 0, 0, .2);
    }
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-color);
      color: var(--text-color);
      overflow: hidden;
      font-family: var(--text-font);
    }
    #wrapper {
      position: absolute;
      top: 40px;
      left: 40px;
      max-width: 80%;
      line-height: 1.4;
      font-size: 1rem;
      text-shadow: 0 0 4px var(--accent-color);
    }
    #secret-text {
      white-space: pre-wrap;
      margin: 0;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
      display: block;
    }
    /* Link discreto para voltar (aparece ao passar o mouse) */
    #back-link {
      position: fixed;
      bottom: 10px;
      right: 10px;
      font-size: 0.9rem;
      color: var(--link-color);
      text-decoration: none;
      transition: color 0.3s;
    }
    #back-link:hover {
      color: var(--accent-color);
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <p id="secret-text"></p>
  </div>
  <canvas id="c"></canvas>
  <a id="back-link" href="/">Voltar</a>
  <script>
    /* Texto digitado em loop */
    (function(){
      const lines = [
        "Bem-vindo à sala secreta.",
        "Aqui a estética encontra o código.",
        "Deixe seu olhar vagar.",
        "A arte nunca dorme..."
      ];
      let i = 0, j = 0;
      function type() {
        const txt = lines[i].slice(0, ++j);
        document.getElementById("secret-text").textContent = txt;
        if (j === lines[i].length) {
          setTimeout(() => { j = 0; i = (i + 1) % lines.length; type(); }, 1000);
        } else {
          setTimeout(type, 80);
        }
      }
      type();
    })();
  </script>
  <script>
    /* Arte generativa no canvas */
    (function(){
      var c = document.getElementById('c');
      var w = c.width = window.innerWidth;
      var h = c.height = window.innerHeight;
      var ctx = c.getContext('2d');
      var opts = {
        len: 20, count: 50,
        baseTime: 10, addedTime: 10,
        dieChance: .05, spawnChance: 1,
        sparkChance: .1, sparkDist: 10, sparkSize: 2,
        color: 'hsl(hue,100%,light%)',
        baseLight: 50, addedLight: 10,
        shadowToTimePropMult: 6,
        baseLightInputMultiplier: .01,
        addedLightInputMultiplier: .02,
        cx: w/2, cy: h/2,
        repaintAlpha: .04,
        hueChange: .1
      };
      var tick = 0, lines = [],
          dieX = w/2/opts.len, dieY = h/2/opts.len,
          baseRad = Math.PI*2/6;
      ctx.fillStyle = varBG(); ctx.fillRect(0,0,w,h);
      function varBG(){ return getComputedStyle(document.documentElement).getPropertyValue('--bg-color') }
      function loop(){
        window.requestAnimationFrame(loop);
        ++tick;
        ctx.globalCompositeOperation = 'source-over';
        ctx.shadowBlur = 0;
        ctx.fillStyle = 'rgba(0,0,0,'+opts.repaintAlpha+')';
        ctx.fillRect(0,0,w,h);
        ctx.globalCompositeOperation = 'lighter';
        if(lines.length < opts.count && Math.random() < opts.spawnChance)
          lines.push(new Line);
        lines.forEach(function(line){ line.step(); });
      }
      function Line(){ this.reset(); }
      Line.prototype.reset = function(){
        this.x = this.y = this.addedX = this.addedY = 0;
        this.rad = 0;
        this.lightInputMultiplier = opts.baseLightInputMultiplier + opts.addedLightInputMultiplier*Math.random();
        this.color = opts.color.replace('hue', tick*opts.hueChange);
        this.cumulativeTime = 0;
        this.beginPhase();
      };
      Line.prototype.beginPhase = function(){
        this.x += this.addedX; this.y += this.addedY;
        this.time = 0;
        this.targetTime = (opts.baseTime + opts.addedTime*Math.random())|0;
        this.rad += baseRad * (Math.random()<.5?1:-1);
        this.addedX = Math.cos(this.rad);
        this.addedY = Math.sin(this.rad);
        if(Math.random() < opts.dieChance ||
           this.x > dieX || this.x < -dieX ||
           this.y > dieY || this.y < -dieY)
          this.reset();
      };
      Line.prototype.step = function(){
        ++this.time; ++this.cumulativeTime;
        if(this.time >= this.targetTime) this.beginPhase();
        var prop = this.time/this.targetTime,
            wave = Math.sin(prop*Math.PI/2),
            x = this.addedX*wave,
            y = this.addedY*wave;
        ctx.shadowBlur = prop * opts.shadowToTimePropMult;
        var light = opts.baseLight + opts.addedLight*Math.sin(this.cumulativeTime*this.lightInputMultiplier);
        ctx.fillStyle = ctx.shadowColor = this.color.replace('light', light);
        ctx.fillRect(opts.cx+(this.x+x)*opts.len,
                     opts.cy+(this.y+y)*opts.len,2,2);
        if(Math.random()<opts.sparkChance)
          ctx.fillRect(
            opts.cx+(this.x+x)*opts.len + (Math.random()*opts.sparkDist*(Math.random()<.5?1:-1)) - opts.sparkSize/2,
            opts.cy+(this.y+y)*opts.len + (Math.random()*opts.sparkDist*(Math.random()<.5?1:-1)) - opts.sparkSize/2,
            opts.sparkSize, opts.sparkSize
          );
      };
      loop();
      window.addEventListener('resize', function(){
        w = c.width = window.innerWidth;
        h = c.height = window.innerHeight;
        ctx.fillStyle = varBG(); ctx.fillRect(0,0,w,h);
        opts.cx = w/2; opts.cy = h/2;
        dieX = w/2/opts.len; dieY = h/2/opts.len;
      });
    })();
  </script>
</body>
</html>
